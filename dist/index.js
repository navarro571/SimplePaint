var f=class{constructor(e,t={height:800,width:600}){this._canvas=e,this._ctx=e.getContext("2d"),this._canvas.height=t.height,this._canvas.width=t.width}get canvas(){return this._canvas}get context(){return this._ctx}resizeCanvas(e,t){let m=this._ctx.getImageData(0,0,this.canvas.width,this._canvas.height);this._canvas.height=e,this._canvas.width=t,this._ctx.putImageData(m,0,0)}},d=f;var g=class{static register(e,t){this[e]||(this[e]=new Array),this[e].push(t)}static unregister(e,t){!this[e]||this[e].splice(this[e].indexOf(t),1)}static dispatch(e,t){!this[e]||this[e].forEach(m=>m(t))}},s=g;var i=class{static init(e){s.register("canvas-mousemove",t=>this.brush.onMouseMove(t.e,e)),s.register("canvas-mousedown",t=>this.brush.onMouseDown(t.e,e)),s.register("canvas-mouseup",t=>this.brush.onMouseUp(t.e,e)),s.register("canvas-mouseout",t=>this.brush.onMouseOut(t.e,e))}static setBrush(e){this.brush=e}static setContext(e){i.ctx=e}};var h=class{static init(e){e.addEventListener("mousedown",t=>s.dispatch("canvas-mousedown",{e:t})),e.addEventListener("mousemove",t=>s.dispatch("canvas-mousemove",{e:t})),e.addEventListener("mouseup",t=>s.dispatch("canvas-mouseup",{e:t})),e.addEventListener("mouseout",t=>s.dispatch("canvas-mouseout",{e:t}))}};var a=class{static registerButton(e,t){e.addEventListener("click",()=>i.setBrush(t))}};var w=document.querySelector("#color-selector"),l=document.querySelector("#linewidth-selector"),p=document.querySelector("#lineWidth-number"),E=document.querySelector("#fill");window.addEventListener("load",()=>{document.querySelector("canvas").scrollIntoView({block:"center",inline:"center"})});l.addEventListener("mousemove",()=>{p.innerText=l.value});p.innerText=l.value;function r(){return w.value||"black"}function o(){return Math.floor(parseInt(l.value))||10}function c(){return E.checked}var I=class{constructor(){this.isPaiting=!1}onMouseDown(e,t){this.isPaiting=!0,t.lineCap="round",t.strokeStyle=r(),t.fillStyle=r(),t.lineWidth=o(),t.beginPath(),this.onMouseMove(e,t)}onMouseMove(e,t){!this.isPaiting||(t.lineTo(e.offsetX,e.offsetY),t.stroke(),t.beginPath(),t.moveTo(e.offsetX,e.offsetY))}onMouseUp(e,t){this.isPaiting=!1,t.closePath()}onMouseOut(e,t){this.isPaiting=!1,t.closePath()}},M=I;var u=class{constructor(e=0,t=0){this.x=e,this.y=t}};var P=class{constructor(){this.isPaiting=!1;this.startPos=new u}onMouseDown(e,t){this.isPaiting=!0,t.lineCap="round",t.strokeStyle=r(),t.fillStyle=r(),t.lineWidth=o(),this.startPos={x:e.offsetX,y:e.offsetY},this.imageData=t.getImageData(0,0,t.canvas.width,t.canvas.height)}onMouseMove(e,t){!this.isPaiting||(t.putImageData(this.imageData,0,0),t.beginPath(),t.rect(this.startPos.x,this.startPos.y,e.offsetX-this.startPos.x,e.offsetY-this.startPos.y),c()?t.fill():t.stroke())}onMouseUp(e,t){this.isPaiting=!1,t.closePath()}onMouseOut(e,t){this.isPaiting=!1,t.closePath()}},b=P;var B=class{constructor(){this.isPaiting=!1;this.startPos=new u}onMouseDown(e,t){this.isPaiting=!0,t.lineCap="round",t.strokeStyle=r(),t.fillStyle=r(),t.lineWidth=o(),this.startPos={x:e.offsetX,y:e.offsetY},this.imageData=t.getImageData(0,0,t.canvas.width,t.canvas.height)}onMouseMove(e,t){!this.isPaiting||(t.putImageData(this.imageData,0,0),t.beginPath(),t.arc(this.startPos.x,this.startPos.y,Math.sqrt((this.startPos.x-e.offsetX)**2+(this.startPos.y-e.offsetY)**2),0,2*Math.PI,!1),c()?t.fill():t.stroke())}onMouseUp(e,t){this.isPaiting=!1,t.closePath()}onMouseOut(e,t){this.isPaiting=!1,t.closePath()}},C=B;var D=document.querySelector("canvas"),L=document.querySelector("#canvas-resize"),S=document.querySelector("#canvas-resize-height"),H=document.querySelector("#canvas-resize-width"),v=new d(D,{height:900,width:1600}),y=new M,T=new b,q=new C;a.registerButton(document.querySelector("#pencil-brush"),y);a.registerButton(document.querySelector("#rect-brush"),T);a.registerButton(document.querySelector("#circle-brush"),q);h.init(v.canvas);i.init(v.context);i.setBrush(y);L.onclick=()=>v.resizeCanvas(parseInt(S.value),parseInt(H.value));
//# sourceMappingURL=index.js.map
